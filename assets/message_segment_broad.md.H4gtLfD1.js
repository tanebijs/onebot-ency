import{_ as d,c as e,o as a,ae as r}from"./chunks/framework.CgMrDesg.js";const m=JSON.parse('{"title":"广义消息段","description":"","frontmatter":{},"headers":[],"relativePath":"message/segment/broad.md","filePath":"message/segment/broad.md"}'),o={name:"message/segment/broad.md"};function h(n,t,s,i,l,b){return a(),e("div",null,t[0]||(t[0]=[r('<h1 id="广义消息段" tabindex="-1">广义消息段 <a class="header-anchor" href="#广义消息段" aria-label="Permalink to &quot;广义消息段&quot;">​</a></h1><p>广义消息段指在 QQ 客户端不以消息的形式出现，但仍然位于 OneBot 11 标准中的消息段。</p><h2 id="poke" tabindex="-1"><code>poke</code> <a class="header-anchor" href="#poke" aria-label="Permalink to &quot;`poke`&quot;">​</a></h2><p>指<strong>私聊页面中的戳一戳</strong>（最早名为<strong>窗口抖动</strong>），而非群聊和私聊中都存在的“小灰条”戳一戳。注意区分。</p><h3 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>type</td><td>number</td><td>戳一戳类型</td></tr><tr><td>id</td><td>number</td><td>戳一戳 ID</td></tr><tr><td>name</td><td>string</td><td>戳一戳名称，仅在收到时有效</td></tr></tbody></table><details class="details custom-block"><summary>Mirai 的 PokeMessage 类对戳一戳类型和 ID 的定义</summary><table tabindex="0"><thead><tr><th>戳一戳名称</th><th>类型</th><th>ID</th></tr></thead><tbody><tr><td>戳一戳</td><td>1</td><td>-1</td></tr><tr><td>比心</td><td>2</td><td>-1</td></tr><tr><td>点赞</td><td>3</td><td>-1</td></tr><tr><td>心碎</td><td>4</td><td>-1</td></tr><tr><td>666</td><td>5</td><td>-1</td></tr><tr><td>放大招</td><td>6</td><td>-1</td></tr><tr><td>宝贝球</td><td>126</td><td>2011</td></tr><tr><td>玫瑰花</td><td>126</td><td>2007</td></tr><tr><td>召唤术</td><td>126</td><td>2006</td></tr><tr><td>让你皮</td><td>126</td><td>2009</td></tr><tr><td>结印</td><td>126</td><td>2005</td></tr><tr><td>手雷</td><td>126</td><td>2004</td></tr><tr><td>勾引</td><td>126</td><td>2003</td></tr><tr><td>抓一下</td><td>126</td><td>2001</td></tr><tr><td>碎屏</td><td>126</td><td>2002</td></tr><tr><td>敲门</td><td>126</td><td>2002</td></tr></tbody></table></details><h3 id="说明" tabindex="-1">说明 <a class="header-anchor" href="#说明" aria-label="Permalink to &quot;说明&quot;">​</a></h3><p>OneBot 11 设计时，还不存在上述第二种“小灰条”戳一戳，因此需要发送新的戳一戳时，需要用 <code>send_poke</code> 之类的扩展 API。</p><h2 id="anonymous" tabindex="-1"><code>anonymous</code> <a class="header-anchor" href="#anonymous" aria-label="Permalink to &quot;`anonymous`&quot;">​</a></h2><p>当消息中包含该消息段时，表示该消息是匿名发送的。NTQQ 已经不再支持匿名消息，因此该消息段已经过时。</p><h2 id="forward" tabindex="-1"><code>forward</code> <a class="header-anchor" href="#forward" aria-label="Permalink to &quot;`forward`&quot;">​</a></h2><p>表示合并转发消息。</p><h3 id="参数-1" tabindex="-1">参数 <a class="header-anchor" href="#参数-1" aria-label="Permalink to &quot;参数&quot;">​</a></h3><table tabindex="0"><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>string</td><td>合并转发资源 ID，需通过 get_forward_msg API 获取具体内容</td></tr></tbody></table><h2 id="node" tabindex="-1"><code>node</code> <a class="header-anchor" href="#node" aria-label="Permalink to &quot;`node`&quot;">​</a></h2><p>表示合并转发消息节点，每个节点表示一条完整的转发消息。</p><h3 id="参数-2" tabindex="-1">参数 <a class="header-anchor" href="#参数-2" aria-label="Permalink to &quot;参数&quot;">​</a></h3><p>发送 <code>node</code> 时，有两种表示消息节点的方式：</p><p>其一是直接引用存在的消息，这时需要提供消息 ID，参数如下：</p><table tabindex="0"><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>number</td><td>消息 ID</td></tr></tbody></table><p>其二是自定义消息，这时需要提供消息内容，参数如下：</p><table tabindex="0"><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>user_id</td><td>number</td><td>消息发送者 QQ 号</td></tr><tr><td>nickname</td><td>string</td><td>消息发送者昵称</td></tr><tr><td>content</td><td>message</td><td>消息内容</td></tr></tbody></table><p>使用 <code>get_forward_msg</code> API 时，返回的消息是 <code>node</code> 消息段数组，且均为自定义消息风格的参数。</p><h3 id="说明-1" tabindex="-1">说明 <a class="header-anchor" href="#说明-1" aria-label="Permalink to &quot;说明&quot;">​</a></h3><p>在 <a href="https://docs.go-cqhttp.org/cqcode/#%E5%90%88%E5%B9%B6%E8%BD%AC%E5%8F%91%E6%B6%88%E6%81%AF%E8%8A%82%E7%82%B9" target="_blank" rel="noreferrer">go-cqhttp</a> 中，发送自定义消息 <code>node</code> 时所用的字段和 OneBot 11 标准中定义的<strong>完全不同</strong>，具体如下：</p><table tabindex="0"><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>uin</td><td>number</td><td>消息发送者 QQ 号</td></tr><tr><td>name</td><td>string</td><td>消息发送者昵称</td></tr><tr><td>content</td><td>message</td><td>消息内容</td></tr><tr><td>time</td><td>number</td><td>消息发送时间戳</td></tr><tr><td>seq</td><td>number</td><td>消息序列号</td></tr></tbody></table><p>其余协议端的实现中，则兼顾了 OneBot 11 标准和 go-cqhttp 的实现，用两种风格的字段都可以发送。</p>',28)]))}const p=d(o,[["render",h]]);export{m as __pageData,p as default};
